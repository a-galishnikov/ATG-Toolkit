<idea-plugin url="https://github.com/chivaler/ATG-Toolkit">
    <id>org.idea.plugin.atg</id>
    <name>ATG Toolkit (Beta)</name>
    <id>atg-toolkit</id>
    <version>0.8</version>
    <vendor email="chivaler@gmail.com">Igor Pidgurskyi</vendor>

    <description><![CDATA[
      Plugin simplifies development of Oracle Commerce modules (former ATG)<br>
      Available navigation and  suggestions for Nucleus IoC components
    ]]></description>

    <change-notes><![CDATA[
        0.1 Created intention on a non-abstract java class "Create ATG component"<br>
        0.2 Created plugin settings page.<br>
            Configurable excluded classes for collecting setters<br>
        0.3 Rework of guessing components based on classes<br>
        0.4 Go to components action "Alt+P"<br>
            Guess of missing properties in files<br>
            Guess of dependencies values based on dependencies classes<br>
            Added references for components and properties<br>
        0.5 Renaming/moving of components affects all links to them<br>
            Classes of components/properties are shown in suggestions lookup<br>
        0.6 Configuration roots changed from implicitly guessed to explicitly chosen<br>
            Module configurations are stored in AtgFacet<br>
            Framework detection of AtgFacets<br>
            MarkAs actions for configuration roots, web roots and configuration layers root<br>
            Added navigation in XML configurations of repositories, pipelines and JMS<br>
            Added navigation in DSP/JSP for IdeaCommunity: bean, beanvalue, page, src attributes<br>
            Help linked to GitHub WIKI<br>
            Added MVP of ATG dependency injection. OOTB configs and classes could be attached to the project. See <a href="https://github.com/chivaler/ATG-Toolkit/wiki/Dependency-management">WIKI</a> for details<br>
        0.7 Fix for reference to property of a component
        0.8 Breadcrumbs to show name attribute for XML tags
            Icon on the gutter for Java class to navigate to components based on the class
            Icon on the gutter for Properties and XMLs when another layers available
            Inspections to verify presence of used classes, components, setters, getters and their types cast
    ]]>

    </change-notes>
    <depends>com.intellij.modules.java</depends>
    <depends>com.intellij.properties</depends>

    <idea-version since-build="181.0"/>
    <resource-bundle>org.idea.plugin.atg.AtgToolkitBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <intentionAction>
            <className>org.idea.plugin.atg.CreateATGComponentIntentionAction</className>
            <category>Java/Declaration</category>
        </intentionAction>
        <projectConfigurable parentId="language" instance="org.idea.plugin.atg.config.AtgToolkitConfigurable"
                             displayName="ATG Toolkit"/>
        <projectService serviceImplementation="org.idea.plugin.atg.config.AtgToolkitConfig"/>

        <completion.contributor language="Properties"
                                implementationClass="org.idea.plugin.atg.completion.ComponentPropertiesCompletionContributor"
                                id="atgPropertiesCompletion" order="first"/>
        <psi.referenceContributor language="XML"
                                  implementation="org.idea.plugin.atg.psi.AtgPipelinesXmlContributor"/>
        <psi.referenceContributor language="XML"
                                  implementation="org.idea.plugin.atg.psi.RepositoryXmlContributor"/>
        <psi.referenceContributor language="XML"
                                  implementation="org.idea.plugin.atg.psi.PatchBayXmlContributor"/>
        <psi.referenceContributor language="Properties"
                                  implementation="org.idea.plugin.atg.psi.AtgReferenceContributor"/>
        <psi.referenceContributor language=""
                                  implementation="org.idea.plugin.atg.psi.JspReferenceContributor"/>

        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="org.idea.plugin.atg.gutter.AtgComponentJavaLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="Properties"
                                        implementationClass="org.idea.plugin.atg.gutter.AtgPropertiesLayersLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="XML"
                                        implementationClass="org.idea.plugin.atg.gutter.AtgXmlLayersLineMarkerProvider"/>

        <gotoRelatedProvider implementation="org.idea.plugin.atg.navigation.GoToComponentRelatedProvider"/>

        <localInspection language="Properties" shortName="DependenciesScope"
                         key="inspection.dependenciesScope.title"
                         groupKey="inspection.group.display.name" enabledByDefault="true"
                         level="ERROR"
                         implementationClass="org.idea.plugin.atg.inspection.DependenciesScopeInspection"/>
        <localInspection language="Properties" shortName="ComponentClass"
                         key="inspection.classNotFound.title"
                         groupKey="inspection.group.display.name" enabledByDefault="true"
                         level="ERROR"
                         implementationClass="org.idea.plugin.atg.inspection.ComponentClassInspection"/>
        <localInspection language="Properties" shortName="AvailableSetter"
                         key="inspection.availableSetter.title"
                         groupKey="inspection.group.display.name" enabledByDefault="true"
                         level="WARNING"
                         implementationClass="org.idea.plugin.atg.inspection.AvailableSetterInspection"/>
        <localInspection language="Properties" shortName="AvailableGetter"
                         key="inspection.availableGetter.title"
                         groupKey="inspection.group.display.name" enabledByDefault="true"
                         level="WARNING"
                         implementationClass="org.idea.plugin.atg.inspection.AvailableGetterInspection"/>
        <localInspection language="Properties" shortName="AvailableDependencies"
                         key="inspection.dependenciesAbsent.title"
                         groupKey="inspection.group.display.name" enabledByDefault="true"
                         level="WARNING"
                         implementationClass="org.idea.plugin.atg.inspection.AvailableDependenciesInspection"/>
        <localInspection language="Properties" shortName="DependenciesTypes"
                         key="inspection.dependenciesTypes.title"
                         groupKey="inspection.group.display.name" enabledByDefault="true"
                         level="WARNING"
                         implementationClass="org.idea.plugin.atg.inspection.DependenciesTypesInspection"/>

        <webHelpProvider implementation="org.idea.plugin.atg.util.HelpProvider"/>

        <breadcrumbsInfoProvider implementation="org.idea.plugin.atg.breadcrumbs.AtgXmlLanguageBreadcrumbsInfoProvider"
                                 order="first"/>

        <facetType implementation="org.idea.plugin.atg.module.AtgModuleFacetType"/>
        <framework.detector implementation="org.idea.plugin.atg.framework.AtgFrameworkDetector"/>
        <iconProvider implementation="org.idea.plugin.atg.module.AtgIconProvider" id="atgFolders" order="first"/>

    </extensions>

    <actions>

        <action id="GoToAtgComponents" class="org.idea.plugin.atg.navigation.GoToComponentCodeAction"
                description="Go to all components based on the class">
            <add-to-group group-id="GoToCodeGroup" anchor="after" relative-to-action="GotoTest"/>
            <add-to-group group-id="EditorPopupMenu.GoTo" anchor="after" relative-to-action="GotoTest"/>
            <keyboard-shortcut first-keystroke="alt P" keymap="$default"/>
        </action>

        <group id="MarkAtgRootGroup">
            <action id="MarkAtgConfigRoot" class="org.idea.plugin.atg.roots.MarkAtgConfigRootAction"/>
            <action id="MarkAtgConfigLayerRoot" class="org.idea.plugin.atg.roots.MarkAtgConfigLayerRootAction"/>
            <action id="MarkAtgWebRoot" class="org.idea.plugin.atg.roots.MarkAtgWebRootAction"/>
            <action id="UnmarkAtgRoot" class="org.idea.plugin.atg.roots.UnmarkAtgConfigLayerRootAction"/>
            <add-to-group group-id="MarkRootGroup" anchor="after" relative-to-action="MarkSourceRootGroup"/>
        </group>

    </actions>

    <project-components>
        <component>
            <implementation-class>org.idea.plugin.atg.roots.AtgEnvironmentRegistrar</implementation-class>
        </component>
    </project-components>

</idea-plugin>